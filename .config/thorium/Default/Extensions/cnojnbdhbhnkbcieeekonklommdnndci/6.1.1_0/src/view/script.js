(()=>{"use strict";var e,t,i,r={3539:(e,t,i)=>{var r=i(341),a=i(729),o=i(9956),n=i(6229),s=i(2502);const c={key:0,class:"view-content"},l={class:"image-header"},g={key:0,class:"image-url-container"},m=["href","title"],d={class:"image-details-container"},p={class:"image-name-text"},u={key:0,class:"image-data-container"},v={key:0,class:"image-data-separator"},h={class:"image-preview"},w=["srcset","type"],f=["src","alt"],y={key:1,class:"error-content"},b={class:"error-text"};i(8755),i(8645),i(9786);var k=i(2758),I=i(2667);const _={components:{[k.gV.name]:k.gV,[k.JO.name]:k.JO,[k.hU.name]:k.hU},data:function(){return{dataLoaded:!1,showError:"",previewImage:null,imageDetails:[],imageLoaded:!1,theme:""}},methods:{getText:I.Q,initSetup:async function(){try{await this.setup()}catch(e){throw this.showError=(0,I.Q)("error_internalError"),e}finally{this.dataLoaded=!0}},setup:async function(){const e=new URL(window.location.href).searchParams.get("id");if((0,a.un)(e)){const t=await(0,a.MX)({message:{id:"storageRequest",asyncResponse:!0,saveReceipt:!0,storageId:e},transferResponse:!0,openConnection:this.$env.isSafari});t?(this.previewImage=t,document.title=(0,I.Q)("pageTitle",[t.imageFilename||(0,I.Q)("pageTitle_view"),(0,I.Q)("extensionName")])):this.showError=(0,I.Q)("error_sessionExpired")}else this.showError=(0,I.Q)("error_invalidPageUrl");this.theme=await(0,a.Z8)(),document.addEventListener("themeChange",(e=>{this.theme=e.detail}))},onPreviewImageLoad:function(){this.setPreviewImageLoaded()},onPreviewImageError:function(e){const t=e.target.previousElementSibling;t.srcset=e.target.src,t.type="image/svg+xml",this.setPreviewImageLoaded()},setPreviewImageLoaded:function(){this.imageLoaded||(this.setImageDetails(),this.imageLoaded=!0)},setImageDetails:function(){const e=document.querySelector(".image-preview .image");let t,i;(0,a.bD)(e)&&(t=e.naturalWidth,i=e.naturalHeight),this.imageDetails=(0,a.pb)({width:t,height:i,size:this.previewImage.imageSize,type:this.previewImage.imageType,iecSize:!this.$env.isWindows})},copyImageUrl:async function(){await navigator.clipboard.writeText(this.previewImage.imageUrl)}},created:function(){this.initSetup()}},O=(0,i(6021).Z)(_,[["render",function(e,t,i,r,a,o){const k=(0,n.up)("vn-icon-button"),I=(0,n.up)("vn-icon"),_=(0,n.up)("vn-app");return e.dataLoaded?((0,n.wg)(),(0,n.j4)(_,{key:0},{default:(0,n.w5)((()=>[e.previewImage&&!e.showError?((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",l,[e.previewImage.imageUrl?((0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("a",{class:"image-url-link",href:e.previewImage.imageUrl,title:e.previewImage.imageFilename},(0,s.toDisplayString)(e.previewImage.imageUrl),9,m),(0,n.Uk)(),(0,n.Wm)(k,{src:"/src/assets/icons/misc/content-copy.svg",title:o.getText("buttonTooltip_copyImageUrl"),onClick:o.copyImageUrl},null,8,["title","onClick"])])):(0,n.kq)("",!0),(0,n.Uk)(),(0,n._)("div",d,[(0,n._)("div",p,(0,s.toDisplayString)(e.previewImage.imageFilename),1),(0,n.Uk)(),e.imageLoaded?((0,n.wg)(),(0,n.iD)("div",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.imageDetails,((e,t)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:t},[t?((0,n.wg)(),(0,n.iD)("div",v,"â€¢")):(0,n.kq)("",!0),(0,n.Uk)(),(0,n._)("div",{class:(0,s.normalizeClass)({[`image-${e.kind}-text`]:!0})},(0,s.toDisplayString)(e.text),3)],64)))),128))])):(0,n.kq)("",!0)])]),(0,n.Uk)(),(0,n._)("picture",h,[(0,n._)("source",{srcset:e.previewImage.imageDataUrl,type:e.previewImage.imageType},null,8,w),(0,n.Uk)(),(0,n._)("img",{class:"image",src:`/src/assets/icons/misc/${"dark"===e.theme?"broken-image-dark":"broken-image"}.svg`,onErrorOnce:t[0]||(t[0]=(...e)=>o.onPreviewImageError&&o.onPreviewImageError(...e)),onLoad:t[1]||(t[1]=(...e)=>o.onPreviewImageLoad&&o.onPreviewImageLoad(...e)),alt:e.previewImage.imageFilename},null,40,f)])])):(0,n.kq)("",!0),(0,n.Uk)(),e.showError?((0,n.wg)(),(0,n.iD)("div",y,[(0,n.Wm)(I,{class:"error-icon",src:"/src/assets/icons/misc/error.svg"}),(0,n.Uk)(),(0,n._)("div",b,(0,s.toDisplayString)(e.showError),1)])):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0)}]]);!async function(){await(0,a.hR)(["400 14px Roboto","500 14px Roboto"]);const e=(0,r.createApp)(O);await(0,a.cO)(e),await(0,o.y)(e),e.mount("body")}()}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var i=a[e]={exports:{}};return r[e].call(i.exports,i,i.exports,o),i.exports}o.m=r,e=[],o.O=(t,i,r,a)=>{if(!i){var n=1/0;for(g=0;g<e.length;g++){for(var[i,r,a]=e[g],s=!0,c=0;c<i.length;c++)(!1&a||n>=a)&&Object.keys(o.O).every((e=>o.O[e](i[c])))?i.splice(c--,1):(s=!1,a<n&&(n=a));if(s){e.splice(g--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var g=e.length;g>0&&e[g-1][2]>a;g--)e[g]=e[g-1];e[g]=[i,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var n={};t=t||[null,i({}),i([]),i(i)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=i(s))Object.getOwnPropertyNames(s).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,o.d(a,n),a},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=4692,(()=>{var e={4692:0};o.O.j=t=>0===e[t];var t=(t,i)=>{var r,a,[n,s,c]=i,l=0;if(n.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(c)var g=c(o)}for(t&&t(i);l<n.length;l++)a=n[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(g)},i=globalThis.webpackChunksearch_by_image=globalThis.webpackChunksearch_by_image||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var n=o.O(void 0,[2787],(()=>o(3539)));n=o.O(n)})();