(()=>{"use strict";var e,t,n,r={2859:(e,t,n)=>{n(9291);var r=n(651),o=n(729),i=n(2667),a=n(6978),s=n(5221);const c="yandex";function u(){return(0,a.mw)(["yandex.com","yandex.ru","yandex.ua","yandex.by","yandex.kz","yandex.uz","yandex.com.tr"],c)}function l(e){if(413===e.status)return void largeImageNotify(c,"8");const t=JSON.parse(e.responseText).blocks[0].params.url,n=`https://${u()}/images/search?${t}`;(0,o.EA)(n)&&window.location.replace(n)}(0,i.Zf)(),window.location.pathname.startsWith("/showcaptcha")||(0,a.xU)((async function({session:e,search:t,image:n,storageIds:p}){const d=document.head.querySelector('meta[name="apple-mobile-web-app-capable"]');if(n=await(0,a.i_)({image:n,engine:c,target:d?"api":"ui"}),d){const e=`https://${u()}/images/touch/search?rpt=imageview&format=json&request={"blocks":[{"block":"cbir-uploader__get-cbir-id"}]}`,t=new FormData;t.append("upfile",n.imageBlob);const r=(0,o.W9)();r.addEventListener("load",(function(){(0,a.bC)(p),(0,a.Pg)(this,l,c)})),r.open("POST",e),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),r.send(t)}else{localStorage.setItem("cbir:uploader_onboarded",`{"count":1,"last":${Date.now()}}`);const{selector:e,node:t,layout:o}=await Promise.race([new Promise(((e,t)=>{const n="input.cbir-panel__file-input";(0,i.DY)(n).then((t=>e({selector:n,node:t,layout:"old"}))).catch((e=>t(e)))})),new Promise(((e,t)=>{const n="input.CbirCore-FileInput";(0,i.DY)(n).then((t=>e({selector:n,node:t,layout:"new"}))).catch((e=>t(e)))}))]);"new"===o&&await new Promise(((e,t)=>{const n=(0,r.Z)(),o=function(){window.clearTimeout(a),e()},a=window.setTimeout((function(){document.removeEventListener(n,o,{capture:!0,once:!0}),t(new Error("Search service is not ready"))}),6e4);document.addEventListener(n,o,{capture:!0,once:!0});let c="";if(["firefox","safari"].includes(s.W9)){const e=document.querySelector("script[nonce]");e&&(c=e.nonce)}(0,i.Lv)(`(${function(e){let t;const n=function(){window.Ya?.reactBus?.e["cbir:search-by-image:start"]?.length>=4?(window.clearTimeout(r),document.dispatchEvent(new Event(e))):t||window.setTimeout(n,200)},r=window.setTimeout((function(){t=!0}),6e4);n()}.toString()})("${n}")`,{nonce:c})})),(await Promise.race([(0,i.DY)(".input_js_inited .input__cbir-button button",{observerOptions:{attributes:!0,attributeFilter:["class"]}}),(0,i.DY)(".input_js_inited button.input__cbir-button",{observerOptions:{attributes:!0,attributeFilter:["class"]}})])).click(),await Promise.race([(0,i.DY)("div.cbir-panel_visibility_visible",{observerOptions:{attributes:!0,attributeFilter:["class"]}}),(0,i.DY)("div.CbirPanel-Popup.Popup2_visible",{observerOptions:{attributes:!0,attributeFilter:["class"]}})]),await(0,a.er)(e,t,n),await(0,a.bC)(p),t.dispatchEvent(new Event("change",{bubbles:!0}))}}),c,taskId)}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,i),n.exports}i.m=r,e=[],i.O=(t,n,r,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,r,o]=e[l],s=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(s=!1,o<a&&(a=o));if(s){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,r,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);i.r(o);var a={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,i.d(o,a),o},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=5999,(()=>{var e={5999:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[a,s,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(c)var l=c(i)}for(t&&t(n);u<a.length;u++)o=a[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(l)},n=globalThis.webpackChunksearch_by_image=globalThis.webpackChunksearch_by_image||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=i.O(void 0,[5844],(()=>i(2859)));a=i.O(a)})();